<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#ffffff" />
  <title>新年のご挨拶</title>
  <style>
    :root{
      --bg1:#fff6f1;   /* peach */
      --bg2:#f2fbff;   /* sky */
      --bg3:#f5fff0;   /* mint */
      --card:#ffffff;
      --ink:#1a2a3a;
      --muted:#516274;
      --line:rgba(17, 34, 51, .12);

      --accent:#ff7aa2; /* pink */
      --accent2:#3bb6ff;/* blue */
      --accent3:#2ed3a3;/* green */
      --gold:#ffb200;

      --shadow: 0 16px 40px rgba(17,34,51,.10);
      --radius: 18px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI",
        "Hiragino Kaku Gothic ProN", "Noto Sans JP", Meiryo, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(900px 600px at 15% 18%, rgba(255,122,162,.22), transparent 58%),
        radial-gradient(900px 600px at 82% 16%, rgba(59,182,255,.22), transparent 58%),
        radial-gradient(900px 700px at 50% 92%, rgba(46,211,163,.18), transparent 62%),
        linear-gradient(135deg, var(--bg1), var(--bg2) 45%, var(--bg3));
      min-height:100svh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:26px 14px;
    }

    .wrap{width:min(1040px, 100%);}

    .card{
      background: var(--card);
      border:1px solid var(--line);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      overflow:hidden;
    }

    .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:18px 20px;
      background: linear-gradient(90deg,
        rgba(255,122,162,.20),
        rgba(59,182,255,.18),
        rgba(46,211,163,.16)
      );
      border-bottom:1px solid var(--line);
    }

    .title{
      display:flex;
      flex-direction:column;
      gap:4px;
    }

    .title h1{
      margin:0;
      font-size:20px;
      letter-spacing:.02em;
    }
    .title .sub{
      margin:0;
      color:var(--muted);
      font-size:13px;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border-radius:999px;
      background: rgba(255,255,255,.75);
      border:1px solid rgba(17,34,51,.14);
      font-size:12px;
      color:rgba(26,42,58,.92);
      white-space:nowrap;
    }
    .pill .spark{
      width:10px;height:10px;border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #fff, var(--gold));
      box-shadow: 0 0 0 5px rgba(255,178,0,.18);
    }

    .grid{
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap:16px;
      padding:18px;
    }
    @media (max-width: 900px){
      .grid{grid-template-columns:1fr}
    }

    .inner{
      background: rgba(255,255,255,.72);
      border:1px solid rgba(17,34,51,.10);
      border-radius: 16px;
      padding:18px;
    }

    .section-title{
      display:flex;
      align-items:center;
      gap:10px;
      margin:0 0 10px 0;
      font-size:15px;
      letter-spacing:.02em;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:6px;
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      background: rgba(59,182,255,.12);
      border:1px solid rgba(59,182,255,.20);
      color:rgba(26,42,58,.92);
    }

    .message p{
      margin:0;
      line-height:1.85;
      color:rgba(26,42,58,.92);
    }
    .muted{color:var(--muted)}
    .hint{
      margin:0;
      font-size:12px;
      color:var(--muted);
      line-height:1.6;
    }
    .hr{
      height:1px;
      background: rgba(17,34,51,.12);
      margin:14px 0;
    }

    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }

    .btn{
      appearance:none;
      border:none;
      cursor:pointer;
      padding:12px 14px;
      border-radius: 14px;
      font-weight: 750;
      color:#fff;
      background: linear-gradient(90deg, var(--accent), #ffb4ca);
      box-shadow: 0 12px 26px rgba(255,122,162,.22);
      transition: transform .08s ease, filter .15s ease;
    }
    .btn:active{transform: translateY(1px) scale(.99)}
    .btn.green{
      background: linear-gradient(90deg, var(--accent3), #aef2df);
      box-shadow: 0 12px 26px rgba(46,211,163,.18);
    }
    .btn.ghost{
      color:rgba(26,42,58,.92);
      background: rgba(255,255,255,.86);
      border:1px solid rgba(17,34,51,.14);
      box-shadow:none;
      font-weight:700;
    }

    .result{
      position:relative;
      background: rgba(255,255,255,.92);
      border:1px solid rgba(17,34,51,.12);
      border-radius: 16px;
      padding:14px;
      min-height: 210px;
      overflow:hidden;
    }
    .result .big{
      margin:0 0 6px 0;
      font-size:28px;
      font-weight:900;
      letter-spacing:.04em;
    }
    .gradtext{
      background: linear-gradient(90deg, var(--accent), var(--accent2), var(--accent3));
      -webkit-background-clip: text;
      background-clip:text;
      color:transparent;
    }
    .result .lead{
      margin:0;
      line-height:1.75;
      color:rgba(26,42,58,.92);
    }

    .cards{
      display:grid;
      grid-template-columns:1fr;
      gap:10px;
      margin-top:12px;
    }
    .mini{
      background: rgba(59,182,255,.08);
      border:1px solid rgba(59,182,255,.18);
      border-radius: 14px;
      padding:10px 12px;
    }
    .mini.pink{
      background: rgba(255,122,162,.08);
      border-color: rgba(255,122,162,.18);
    }
    .mini.green{
      background: rgba(46,211,163,.08);
      border-color: rgba(46,211,163,.18);
    }
    .mini .k{
      margin:0 0 4px 0;
      font-size:12px;
      color:rgba(26,42,58,.82);
      font-weight:800;
      letter-spacing:.02em;
    }
    .mini .v{
      margin:0;
      font-size:13px;
      line-height:1.7;
      color:rgba(26,42,58,.92);
    }

    .chips{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .chip{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      background: rgba(17,34,51,.04);
      border:1px solid rgba(17,34,51,.10);
      color:rgba(26,42,58,.92);
    }

    /* confetti */
    canvas.confetti{
      position:absolute;
      inset:0;
      pointer-events:none;
      opacity:0;
    }
    canvas.confetti.on{opacity:1}

    /* small header mark */
    .mark{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .logo{
      width:34px;height:34px;border-radius:12px;
      background: linear-gradient(135deg, rgba(255,122,162,.35), rgba(59,182,255,.30), rgba(46,211,163,.28));
      border:1px solid rgba(17,34,51,.12);
      display:grid;place-items:center;
    }
    .logo svg{opacity:.95}

    footer{
      margin-top:12px;
      text-align:center;
      color:rgba(81,98,116,.95);
      font-size:12px;
    }
  </style>
</head>

<body>
  <main class="wrap">
    <section class="card">
      <div class="top">
        <div class="mark">
          <div class="logo" aria-hidden="true">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
              <path d="M7 10c3-6 7-6 10 0" stroke="rgba(26,42,58,.85)" stroke-width="2" stroke-linecap="round"/>
              <path d="M6 12c2 3 4 4 6 4s4-1 6-4" stroke="rgba(26,42,58,.85)" stroke-width="2" stroke-linecap="round"/>
              <circle cx="9" cy="10" r="1.2" fill="rgba(26,42,58,.85)"/>
              <circle cx="15" cy="10" r="1.2" fill="rgba(26,42,58,.85)"/>
            </svg>
          </div>
          <div class="title">
            <h1>新年のご挨拶</h1>
            <p class="sub" id="dateLine">—</p>
          </div>
        </div>
        <div class="pill" title="凶なし／説教なし／生活ファーストで、現場の元気が出るメッセージにしています">
          <span class="spark"></span>
          <span>モチベUPおみくじ</span>
        </div>
      </div>

      <div class="grid">
        <!-- left -->
        <div class="inner message">
          <h2 class="section-title">
            ごあいさつ
            <span class="badge">年賀状がわり</span>
          </h2>

          <!-- ▼ここをあなたの文面に書き換えOK▼ -->
          <p class="muted" style="margin:0 0 6px 0;">To: 教職員のみなさま</p>
          <p>
            あけましておめでとうございます。<br>
            旧年中はさまざまな場面で支えていただき、ありがとうございました。<br>
            今年は78期生にとってまさに「6年の集大成」の年となりますが、引き続き78期に関わっておられる全ての先生方のお力を合わせてともに歩んでいければと思っています。<br>
            本年もどうぞよろしくお願い申し上げます。
          </p>
          <p style="margin-top:10px">
            ささやかですが、<b>新年の「おみくじ」</b> も用意しました。<br>
            気軽に何度でもお試しください。
          </p>
          <!-- ▲ここまで▲ -->

          <div class="hr"></div>
          <p class="hint">
            ※ このページは外部通信なしで動作します
          </p>
        </div>

        <!-- right -->
        <div class="inner">
          <h2 class="section-title">おみくじ</h2>
          <p class="hint" style="margin-top:-6px">
            何回でも引けます。気分転換にどうぞ。
          </p>

          <div class="row" style="margin-top:10px">
            <button class="btn ghost" id="reset">表示をリセット</button>
          </div>

          <div style="height:10px"></div>

          <div class="result" aria-live="polite">
            <canvas class="confetti" id="confetti"></canvas>
            <p class="big gradtext" id="fortuneBig">まだ引いていません</p>
            <p class="lead" id="fortuneLead">「おみくじを引く」を押すと、今日のヒントが出ます。</p>

            <div class="cards" id="cards" style="display:none">
              <div class="mini green">
                <p class="k">生徒対応のひと言</p>
                <p class="v" id="studentHint">—</p>
              </div>
              <div class="mini">
                <p class="k">チーム連携</p>
                <p class="v" id="teamHint">—</p>
              </div>
              <div class="mini green">
                <p class="k">自分へのケア</p>
                <p class="v" id="selfCare">—</p>
              </div>
              <div class="mini pink">
                <p class="k">自分へのねぎらい</p>
                <p class="v" id="praise">—</p>
              </div>
            </div>

            <div class="chips" id="chips" style="display:none"></div>
          </div>

          <div class="row" style="margin-top:12px">
            <button class="btn green" id="draw">おみくじを引く</button>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <span id="footerYear">—</span> / HTML + CSS + JavaScript（1ファイル）
    </footer>
  </main>

<script>
(() => {
  // ===== 日付表示 =====
  const now = new Date();
  const y = now.getFullYear();
  const m = now.getMonth() + 1;
  const d = now.getDate();
  const w = ["日","月","火","水","木","金","土"][now.getDay()];
  document.getElementById("dateLine").textContent = `${y}年${m}月${d}日（${w}）`;
  document.getElementById("footerYear").textContent = `© ${y}`;

  // ===== おみくじ（教職員向け / 凶なし / 説教なし / 生活ファースト） =====
  const fortunes = [
    {title:"大吉", weight: 18, lead:"いい流れ。今日は『軽やかに一歩』がはまりやすい日。"},
    {title:"中吉", weight: 34, lead:"安定の追い風。いつもの段取りがちゃんと味方してくれます。"},
    {title:"小吉", weight: 30, lead:"じわじわ良い日。小さな工夫が、後から効いてきます。"},
    {title:"吉",   weight: 18, lead:"ちょうどいい日。頑張りすぎず、整えながら進めばOK。"}
  ];

  const studentHints = [
    "今日は“聞く日”でもOK。短い相づちだけで十分届くことがあります。",
    "生徒の言葉を1回だけ言い換えて返すと、会話がすっと進みやすい。",
    "困りごとは“いま”と“次”に分けると、負担が軽くなります。",
    "正解探しより、選択肢を2つ用意する感じで。本人が選べると前に進みます。",
    "小さな進歩を拾う日。『そこできたのいいね』が効きます。"
  ];

  const teamHints = [
    "共有は短文でOK：『結論→次→期限』の3つだけで十分伝わります。",
    "頼みごとは“相手の都合を聞く一言”があると、空気が柔らかくなります。",
    "今日は“助けを借りる日”でもOK。早めに言うほどラクになります。",
    "雑談の一言が、仕事の連携をスムーズにします（本当に）。",
    "困りごとを“見える化”すると、チームの安心感が上がります。"
  ];

  const selfCares = [
    "仕事は生活の一部。今日は“自分のリズム”を守る方を優先で。",
    "休憩は短くても効きます。1分だけ立って肩を回すだけでもOK。",
    "『今日はここまで』の線引きができたら、それは勝ちです。",
    "完璧じゃなくて大丈夫。心地よく続けられる形がいちばん強い。",
    "帰宅後の楽しみを1つ確保する（小さくていい、あるだけで強い）。"
  ];

  const praises = [
    "今日も現場を回している時点で、十分すごいです。",
    "あなたの“気づき”が、生徒の安心につながっています。",
    "丁寧に見ていることは、ちゃんと伝わっています。",
    "うまくいった点、きっとあります。見つけられるのは強さです。",
    "背負いすぎない工夫ができたら、それも立派な仕事です。"
  ];

  const tags = [
    "ゆるくいこう", "余白づくり", "現場あるある", "小さな工夫",
    "声かけ", "整える", "チームで回す", "生活ファースト"
  ];

  function pick(arr){
    return arr[Math.floor(Math.random() * arr.length)];
  }

  function pickWeighted(items){
    const total = items.reduce((s,x)=>s + x.weight, 0);
    let r = Math.random() * total;
    for(const it of items){
      r -= it.weight;
      if(r <= 0) return it;
    }
    return items[items.length-1];
  }

  // ===== UI DOM =====
  const drawBtn = document.getElementById("draw");
  const resetBtn = document.getElementById("reset");

  const fortuneBig = document.getElementById("fortuneBig");
  const fortuneLead = document.getElementById("fortuneLead");
  const cards = document.getElementById("cards");

  const studentHint = document.getElementById("studentHint");
  const teamHint = document.getElementById("teamHint");
  const selfCare = document.getElementById("selfCare");
  const praise = document.getElementById("praise");
  const chipsWrap = document.getElementById("chips");

  // ===== confetti =====
  const canvas = document.getElementById("confetti");
  const ctx = canvas.getContext("2d");
  let raf = null;

  function burstConfetti(){
    const parent = canvas.parentElement;
    const rect = parent.getBoundingClientRect();
    canvas.width = Math.max(1, Math.floor(rect.width));
    canvas.height = Math.max(1, Math.floor(rect.height));
    canvas.classList.add("on");

    const palette = [
      "rgba(255,122,162,.85)",
      "rgba(59,182,255,.85)",
      "rgba(46,211,163,.85)",
      "rgba(255,178,0,.85)"
    ];

    const pieces = Array.from({length: 95}, () => ({
      x: Math.random()*canvas.width,
      y: -20 - Math.random()*canvas.height*0.25,
      vy: 1.6 + Math.random()*3.2,
      vx: -1.4 + Math.random()*2.8,
      r: 2 + Math.random()*5,
      a: 0.75 + Math.random()*0.25,
      rot: Math.random()*Math.PI,
      c: palette[Math.floor(Math.random()*palette.length)]
    }));

    let frames = 0;
    const maxFrames = 85;

    const tick = () => {
      frames++;
      ctx.clearRect(0,0,canvas.width,canvas.height);

      for(const p of pieces){
        p.x += p.vx;
        p.y += p.vy;
        p.rot += 0.16;

        ctx.save();
        ctx.globalAlpha = p.a;
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot);
        ctx.fillStyle = p.c;
        ctx.fillRect(-p.r, -p.r, p.r*2, p.r*1.35);
        ctx.restore();
      }

      if(frames < maxFrames){
        raf = requestAnimationFrame(tick);
      }else{
        canvas.classList.remove("on");
        ctx.clearRect(0,0,canvas.width,canvas.height);
      }
    };

    if(raf) cancelAnimationFrame(raf);
    tick();
  }

  function renderResult(payload){
    fortuneBig.textContent = payload.f.title;
    fortuneLead.textContent = payload.f.lead;

    studentHint.textContent = payload.studentHint;
    teamHint.textContent = payload.teamHint;
    selfCare.textContent = payload.selfCare;
    praise.textContent = payload.praise;

    cards.style.display = "grid";

    chipsWrap.style.display = "flex";
    chipsWrap.innerHTML = "";
    for(const c of payload.chips){
      const el = document.createElement("span");
      el.className = "chip";
      el.textContent = c;
      chipsWrap.appendChild(el);
    }

    if(payload.f.title === "大吉" || payload.f.title === "中吉"){
      burstConfetti();
    }
  }

  function makePayload(){
    const f = pickWeighted(fortunes);
    return {
      f,
      studentHint: pick(studentHints),
      teamHint: pick(teamHints),
      selfCare: pick(selfCares),
      praise: pick(praises),
      chips: Array.from({length: 4}, () => pick(tags))
    };
  }

  drawBtn.addEventListener("click", () => {
    renderResult(makePayload());
  });

  resetBtn.addEventListener("click", () => {
    fortuneBig.textContent = "まだ引いていません";
    fortuneLead.textContent = "「おみくじを引く」を押すと、今日のヒントが出ます。";
    cards.style.display = "none";
    chipsWrap.style.display = "none";
    chipsWrap.innerHTML = "";
  });
})();
</script>
</body>
</html>
